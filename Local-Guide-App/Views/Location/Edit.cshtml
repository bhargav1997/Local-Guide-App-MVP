@model Local_Guide_App.Models.LocationDto

@{
    ViewBag.Title = "Edit Location";
}

<h2>Edit Location</h2>

<form action="@Url.Action("Update", "Location")" method="post" enctype="multipart/form-data">
    <input type="hidden" name="LocationId" value="@Model.LocationId" />

    <div class="form-group">
        <label for="LocationName">Location Name</label>
        <input type="text" id="LocationName" name="LocationName" class="form-control" value="@Model.LocationName" />
    </div>
    <div class="form-group">
        <label for="LocationDescription">Location Description</label>
        <input type="text" id="LocationDescription" name="LocationDescription" class="form-control" value="@Model.LocationDescription" />
    </div>
    <div class="form-group">
        <label for="Category">Category</label>
        <input type="text" id="Category" name="Category" class="form-control" value="@Model.Category" />
    </div>
    <div class="form-group">
        <label for="Address">Address</label>
        <input type="text" id="Address" name="Address" class="form-control" value="@Model.Address" />
    </div>
    <div class="form-group">
        <label for="AverageRating">Average Rating</label>
        <input type="text" id="AverageRating" name="AverageRating" class="form-control" value="@Model.AverageRating" />
    </div>
    <div class="form-group">
        <label for="LocationPic">Upload Picture (Max Size: 5MB)</label>
        <input type="file" id="LocationPic" name="LocationPic" accept="image/*" onchange="validateFileSize(this)" />
        <br/>
        <small class="text-muted">Max file size: 5MB</small>
    </div>
    <button type="submit" class="btn btn-primary">Save</button>
    <a href="@Url.Action("Details", new { id = Model.LocationId })" class="btn btn-secondary">Cancel</a>
</form>

<script>
    function validateFileSize(input) {
        if (input.files && input.files[0]) {
            var fileSize = input.files[0].size; // Size in bytes
            var maxSize = 5 * 1024 * 1024; // 5MB

            if (fileSize > maxSize) {
                alert("File size exceeds 5MB. Please choose a smaller file.");
                input.value = ''; // Clear the input to reset
            }
        }
    }
</script>